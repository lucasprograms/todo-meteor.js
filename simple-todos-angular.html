<head><!-- Latest compiled and minified CSS -->
  <title>Absurd</title>
</head>

<body>
  <div  class="container"
        ng-app="simple-todos"
        ng-controller="TodosAppCtrl">

    <header>
      <h1>Absurd</h1>
      <br>
      <h3>Tasks to Complete: {{ incompleteCount() }}</h3>

    </header>

    <login-buttons><br></login-buttons>

    <br>

    <!-- hide completed tasks button -->

    <label class="checkbox-label" for="toggle" class="hide-completed">
      <input class="checkbox-input" id="toggle" type="checkbox" ng-model="hideCompleted"/>
      <span ng-hide="hideCompleted" class="checkbox-span">Hide Completed Tasks</span>
      <span ng-show="hideCompleted" class="checkbox-span">Show Completed Tasks</span>
    </label>

    <br><br>

    <!-- new task form -->

    <form class="new-task"
          ng-submit="addTask(newTask);  newTask='';"
          ng-show="$root.currentUser">

      <input class="new-task-input" type="text"
             ng-model="newTask" placeholder=" New Task"
             name="text"/>
    </form>

    <!-- tasks list -->

    <ul>
      <li ng-repeat="task in tasks | orderBy:'upvotes.length -
          downvotes.length':true" class="group"
          ng-class="{ 'checked': task.checked, 'private': task.private }">

        <!-- upvotes/downvotes -->

        <div class="voting-wrapper">
          <i class="fa fa-sort-up fa-2x vote-marker"
             ng-click="upvote(task, $root.currentUser)"></i>
          <span class="votes">{{ votes(task) }}</span>
          <i class="fa fa-sort-down fa-2x vote-marker"
             ng-click="downvote(task, $root.currentUser)"></i>
        </div>

        <!-- content for tasks -->

        <div class="content-wrapper group">



          <!-- private tasks -->

          <i class="fa fa-lg set-private"
             ng-class="{ 'fa-user': task.private, 'fa-user-plus': !task.private }"
             ng-if="task.owner === $root.currentUser._id"
             ng-click="setPrivate(task)"></i>


          <!-- task details -->

          <span class="text">
            <strong>{{ task.username }}</strong> - {{task.text}}
          </span>

          <!-- task actions -->

          <span class="task-actions">

            <!-- delete task button -->

            <i class="delete fa fa-close fa-lg task-action"
               ng-click="deleteTask(task)"
               ng-show="task.username === $root.currentUser.username">
            </i>

            <!-- toggle comments button -->

            <span ng-click="toggleComments(task)" class="toggle-comments task-action">{{ task.showComments ? 'Hide' : 'Show' }} Comments</span>

            <!-- toggle completion -->

            <input type="checkbox" ng-checked="task.checked"
                   name="completion-checkbox"
                   class="task-action"
                   ng-click="setChecked(task)" class="toggle-checked"
                   ng-show="task.username === $root.currentUser.username">
          </span>

          <!-- task comments -->

          <div class="comments" ng-show="task.showComments">

            <ul>
              <strong><li ng-hide="$root.currentUser">Sign in to comment!</li></strong>

              <!-- comments form -->

              <li ng-show="$root.currentUser">
                <form class="new-comment"
                    ng-submit="addComment(task, newComment); newComment=''">
                <input class="new-comment-input" ng-model="newComment" type="text"
                       placeholder=" New Comment" name="text"/>
                </form>
              </li>

              <!-- comments list -->

              <li ng-repeat="comment in task.comments">
                {{ comment.username }} - {{ comment.text }}
                <i class="fa fa-close delete"
                   ng-click="deleteComment(task, comment)"
                   ng-show="comment.username === $root.currentUser.username">
                </i>
              </li>
            </ul>

          </div>

        </div>
      </li>
    </ul>
  </div>


</body>
