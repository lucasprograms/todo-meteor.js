<head><!-- Latest compiled and minified CSS -->
  <title>Absurd</title>
</head>

<body>
  <div  class="container"
        ng-app="simple-todos"
        ng-controller="TodosAppCtrl">

    <header>
      <h1>Absurd</h1>
      <br>
      <h3>Tasks to Complete: {{ incompleteCount() }}</h3>

    </header>

    <login-buttons><br></login-buttons>

    <br>
    <label class="checkbox-label" for="toggle" class="hide-completed">
      <input class="checkbox-input" id="toggle" type="checkbox" ng-model="hideCompleted"/>
      <span ng-hide="hideCompleted" class="checkbox-span">Hide Completed Tasks</span>
      <span ng-show="hideCompleted" class="checkbox-span">Show Completed Tasks</span>
    </label>

    <br><br>


    <form class="new-task"
          ng-submit="addTask(newTask);  newTask='';"
          ng-show="$root.currentUser">
      <input class="new-task-input" type="text" ng-model="newTask" placeholder=" New Task" name="text"/>
    </form>

    <ul>
      <li ng-repeat="task in tasks | orderBy:'upvotes.length - downvotes.length':true" class="group" ng-class="{ 'checked': task.checked }">
        <div class="voting-wrapper">
          <i class="fa fa-sort-up fa-2x vote-marker"
             ng-click="upvote(task, $root.currentUser)"></i>
          <span class="votes">{{ votes(task) }}</span>
          <i class="fa fa-sort-down fa-2x vote-marker"
             ng-click="downvote(task, $root.currentUser)"></i>
        </div>
        <div class="content-wrapper group">

          <input type="checkbox" ng-checked="task.checked"
                 ng-click="setChecked(task)" class="toggle-checked"
                 ng-show="task.username === $root.currentUser.username">
          <span class="text">
            <strong>{{ task.username }}</strong> - {{task.text}}
          </span>

          <span class="task-actions">
            <button class="delete" ng-click="deleteTask(task)"
                    ng-show="task.username === $root.currentUser.username">
              &times;
            </button>

            <button ng-click="toggleComments(task)" class="toggle-comments">{{ task.showComments ? 'Hide' : 'Show' }} Comments</button>
          </span>


          <div class="comments" ng-show="task.showComments">

            <ul>
              <strong><li ng-hide="$root.currentUser">Sign in to comment!</li></strong>
              <li ng-show="$root.currentUser">
                <form class="new-comment"
                    ng-submit="addComment(task, newComment); newComment=''">
                <input class="new-comment-input" ng-model="newComment" type="text"
                       placeholder=" New Comment" name="text"/>
                </form>
              </li>
              <li ng-repeat="comment in task.comments">
                {{ comment.username }} - {{ comment.text }}
                <button class="delete" ng-click="deleteComment(task, comment)"
                        ng-show="task.username === $root.currentUser.username">
                  &times;
                </button>
              </li>
            </ul>

          </div>

        </div>
      </li>
    </ul>
  </div>
</body>
